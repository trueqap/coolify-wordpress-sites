; PHP Settings for CPX62 (16 vCPU, 32GB RAM)
; Optimized for WordPress + WPBenchmark performance

; ===================
; Memory & Execution
; ===================
memory_limit = 512M
max_execution_time = 300
max_input_time = 300
max_input_vars = 5000

; ===================
; File uploads
; ===================
upload_max_filesize = 512M
post_max_size = 512M
max_file_uploads = 50

; ===================
; OPcache - Aggressive caching
; ===================
opcache.enable = 1
opcache.enable_cli = 0
opcache.memory_consumption = 512
opcache.interned_strings_buffer = 64
opcache.max_accelerated_files = 50000
opcache.max_wasted_percentage = 10
opcache.revalidate_freq = 0
opcache.validate_timestamps = 0
opcache.fast_shutdown = 1
opcache.save_comments = 1
opcache.huge_code_pages = 1

; JIT Compiler (PHP 8.0+)
opcache.jit = 1255
opcache.jit_buffer_size = 128M

; ===================
; Realpath cache
; ===================
realpath_cache_size = 8192K
realpath_cache_ttl = 600

; ===================
; Session
; ===================
session.gc_maxlifetime = 1440
session.cookie_httponly = 1
session.cookie_secure = 1
session.use_strict_mode = 1
session.save_handler = files

; ===================
; Security
; ===================
expose_php = Off
display_errors = Off
display_startup_errors = Off
log_errors = On
error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT & ~E_NOTICE
error_log = /proc/self/fd/2

; Disable dangerous functions
disable_functions = exec,passthru,shell_exec,system,proc_open,popen,curl_multi_exec,parse_ini_file,show_source,pcntl_exec

; ===================
; Output & Compression
; ===================
output_buffering = 4096
implicit_flush = Off
zlib.output_compression = On
zlib.output_compression_level = 4

; ===================
; Misc
; ===================
date.timezone = Europe/Budapest
default_socket_timeout = 60

; PCRE
pcre.jit = 1
pcre.backtrack_limit = 1000000
pcre.recursion_limit = 100000

; mbstring
mbstring.language = neutral
mbstring.internal_encoding = UTF-8
